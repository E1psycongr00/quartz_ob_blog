---
tags:
  - 완성
  - 알고리즘
  - PrefixSum
aliases: 
title: 부분합, 누적합
date: 2023-11-01
---
작성 날짜: 2023-11-01
작성 시간: 14:30 ^6bc2d9


----
## 내용(Content)

### 누적합의 수학적 정의

누적합은 수학에서 이야기하는 누적합과 완전히 같다

$S_i$ 의 정의는 다음과 같다.
$$ S_i =  \sum_{k=0}^{i} a_k $$
a 초기값부터 $a_i$ 까지 누적한 합이라는 것이다. 그래서 누적합 S는 이전의 누적합에 이번에 더할 a값으로 나타낼 수도 있다.
$$ S_i = S_{i-1} + a_i $$

이 누적합은 알고리즘에 중요하게 활용된다. 그 이유는 합이라는 전체 과정을 이전의 누적합과 현재 값을 더하는 규칙이 생성되고 이는 DP로 활용될 수 있다.

### 누적합이 가지는 의미

DP로 활용될 수 있다는 말은 최적화가 가능하다는 의미가 된다.
예를 들어 \[a, b] 구간의 연속된 구간의 부분합을 구해야 한다고 가정하자. 

이럴 때는 $S_b - S_{a-1}$ 로 간단하게 구할 수 있다. 이 식이 당연한 이유는 초기값부터 b까지의 합에서 초기값에서 a-1까지 구간의 합을 뺴면 a ~ b 구간의 합을 구할 수 있기 때문이다.

이것의 의미는 우리가 굳이 loop를 돌면서 일일히 연속된 구간의 합을 구할 필요가 없다는 뜻이 된다.

즉, 구간 합을 구할 때 시간 복잡도를 $O(N)$ -> $O(1)$ 으로 줄일 수 있음을 의미한다.


### 코드

#### 기본 구간합 정의하기
우리가 구간합을 수학적으로 정의할 떄는 $S_i = S_{i-1} + a_i$ 로 정의 했지만 컴퓨터 배열 특성 상 예외적인 상황을 처리해줘야해서 불편할 수 있다.

만약 $S_0 = a_0$ 라고 가정해보자

```java
int[] s = new int[arr.length];

// 구간합 초기화 과정
s[0] = arr[0];
for (int i = 1; i < arr.length; i++) {
	s[i] = s[i-1] + arr[i];
}
```

구간 합을 가져오는 방법은 다음과 같다
```java
int sum = s[b] - s[a-1];
```

>[!warning] 구간합 초기화 설정
>초기화 설정시 `a[0] = S[0] - S[-1]`인데 -1 인덱스는 존재하지 않는다.  그래서 별도로 `S[0] = a[0]`으로 정의해주고 1부터 초기화를 진행해주어야 한다.
>- $S_{0} = a_{0}$
>- $Sum[a, b] = S_{b} - S_{a - 1}$
#### Zero Padding 구간 합 정의하기

아주 간단한 방법은 0인 공간을 추가해주는 것이다. 그러면 아주 간단하게 정의할 수 있다.

```java
int[] s = new int[arr.length + 1];

// 구간합 추기화 하기
for (int i = 0; i < arr.length; i++) {
	s[i+1] = s[i] + arr[i];
}
```

$$ S_{i+1} - S_i = a_i $$
로 정의하는 것이다. 인덱스에 -가 없기 떄문에 절대로 0 미만의 인덱스는 가질 수 없다. 이 경우 구간합을 가져오는 것도 기본 구간합과 약간 다르다

```java
// a에서 b까지의 구간합 구하기
int sum = s[b + 1] - s[a];


```

![[a, b 구간합 예시(draw).svg]]

| 종류 | a ~ b구간합      |
| ---- | --------------- |
| 기존 | S(b) - S(a - 1) |
| **추천** | **S(b+1) - S(a)**                |

>[!warning] 기존 수학의 구간 합과 달라 헷갈릴 수 있음
>한 칸 패딩한걸 고려하자
>- $Sum[a,b] =  S_{b+1} - S_{a}$
>- $S_{1} = a_{0}$

## 질문 & 확장

- 2차원 부분합의 경우가 궁금하네
- 상수로 연속된 여러 구간을 업데이트하는 경우 어떤식으로 문제를 풀지 궁금하군

## 출처(링크)
- https://yiyj1030.tistory.com/489

## 연결 노트
- [[2차원 구간합, 부분합]]
- [[구간합 문제 모음]]









