---
tags:
  - 완성
  - OS
  - Process
  - Thread
aliases: 
title: 프로세스 & 스레드 메모리 구조
date: 2024-01-04
---
작성 날짜: 2024-01-04
작성 시간: 14:49


----
## 내용(Content)
### 프로세스 구조
프로세스는 크게 4가지 영역을 기준으로 메모리 영역으로 구성되어 할당 받게 된다.

![[Process 메모리 구조(draw).svg|300]]

- Stack 영역: 지역 변수와 같은 호출한 함수가 종료되면 사라질 임시적인 자료를 저장하는 공간이다. 만일 스택 영역을 초과하면 Stack Overflow가 발생한다. (크기는 가변적이다)
- Heap 영역: 동적으로 생성된 인스턴스와 같은 데이터들을 할당하기 위해 만들어진 공간이다.(크기는 가변적이다.)
- Data 영역: 코드가 실행되면서 사용되는 전역변수나 각종 데이터를 위해 만들어진 공간이다. 크게 .data, .BSS, .rodata 3가지로 나뉜다.
	- .data:
		- 전역 변수 또는 정적 변수 등을 보관
		- 프로그램 시작 시 초기 값이 할당되는 변수들을 저장
	- .BSS(Block Started by Symbol):
		- 초기화되지 않은 전역 변수 또는 정적 변수를 저장
		- 이 영역의 데이터는 시작될 때 0으로 초기화
	- .rodata:
		- 주로 변하지 않은 읽기 전용 데이터를 저장
		- const같은 상수 키워드 선언된 변수나 문자열 상수를 저장
- Code 영역: 
	- 프로그래머가 작성한 프로그램 함수들의 코드가 CPU가 해석 가능한 기계어 형태로 저장되어 있다.

### OS에서 프로세스가 저장될 때 발생하는 일
![[프로세스가 메모리에 저장되는 과정(draw).svg|700]]

예를 들어 OS에서 카카오톡 프로그램을 실행한다고 가정하자. 그러면 카카오톡 프로세스가 만들어질 것이다. 프로세스가 생성된다는 것은 메모리와 CPU로 부터 자원을 할당 받는다는 의미이고, 프로세스가 OS에 적재되는 순간, RAM에 Stack, Heap, Data, Code 영역으로 이루어진 프로세스가 저장된다.

### Process의 자원 공유
프로세스는 메모리의 별도의 주소 공간에서 실행되기 때문에, 한 프로세스는 다른 프로세스의 데이터에 접근할 수 없다. 

그러나 프로세스 간 소통이 불가능한 것이 아니다. 프로세스 간의 정보를 공유하는 방법은 다음과 같다.

- IPC(Inter-Process-Communication)
- LPC(Local-Inter-Communication)
- 임의로 별도의 공유 메모리를 만들어 공유

프로세스 간의 소통이 가능하긴 하지만 큰 단점은 CPU 레지스터 교체 뿐만 아니라 RAM과 CPU 사이의 캐시 메모리도 초기화되기 때문에 비용이 크다는 단점이 있다. 그래서 멀티 프로세싱을 지원하긴 하지만 기본적으로 보다 비용이 적은 멀티 쓰레딩 방식을 선호한다.


### Thread의 메모리 구조
![[Process와 Thread 메모리 관계(draw).svg|600]]

Thread는 Process내에서 Stack영역을 따로 할당 받고 나머지 영역은 공유한다. 쓰레드끼리 프로세스의 자원을 공유하면서 프로세스 실행의 일부로 동작하기 때문에 동시 작업이 가능하고 비용이 적다.
## 질문 & 확장

(없음)

## 출처(링크)
- https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%E2%9A%94%EF%B8%8F-%EC%93%B0%EB%A0%88%EB%93%9C-%EC%B0%A8%EC%9D%B4#%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%9D%98_%EC%9E%90%EC%9B%90_%EA%B3%B5%EC%9C%A0

## 연결 노트
- [[프로세스 & 스레드 정의]]
- [[프로세스의 한계 및 쓰레드 등장]]